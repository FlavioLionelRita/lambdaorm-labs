{"mappings":[{"name":"default","entities":[{"name":"Users","view":true,"primaryKey":["username"],"uniqueKey":["email"],"properties":[{"name":"username","length":32,"nullable":false,"required":true,"type":"string","mapping":"username"},{"name":"firstname","nullable":false,"required":false,"type":"string","length":80,"mapping":"firstname"},{"name":"lastname","nullable":false,"required":false,"type":"string","length":80,"mapping":"lastname"},{"name":"fullmane","view":true,"readExp":"concat(lastname,\", \",firstname)","required":false,"type":"string","length":80,"mapping":"fullmane"},{"name":"email","nullable":false,"length":255,"readExp":"mask(email)","required":true,"type":"string","mapping":"email"},{"name":"created","type":"dateTime","default":"now()","required":false,"mapping":"created"}],"constraints":[{"message":"invalid email","condition":"test(email,\"^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$\")"}],"required":[],"indexes":[],"relations":[{"name":"members","type":"manyToOne","composite":false,"from":"username","entity":"GroupUsers","weak":true,"to":"username","target":"user"},{"name":"devices","type":"manyToOne","composite":false,"from":"username","entity":"Devices","weak":true,"to":"ownerId","target":"owner"}],"dependents":[{"entity":"GroupUsers","relation":{"name":"user","from":"username","entity":"Users","to":"username","target":"members","type":"oneToMany","weak":false}},{"entity":"Devices","relation":{"name":"owner","from":"ownerId","entity":"Users","to":"username","target":"devices","type":"oneToMany","weak":false}}],"composite":false,"hadReadExps":true,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Users","hadKeys":false},{"name":"Groups","primaryKey":["id"],"uniqueKey":["name"],"properties":[{"name":"id","length":32,"default":"lower(substring(replace(name,\" \",\"-\"),0,32))","nullable":false,"required":true,"type":"string","mapping":"id"},{"name":"name","length":32,"nullable":false,"required":true,"type":"string","mapping":"name"},{"name":"created","type":"dateTime","default":"now()","required":false,"mapping":"created"}],"required":[],"indexes":[],"relations":[{"name":"members","type":"manyToOne","composite":false,"from":"id","entity":"GroupUsers","weak":true,"to":"groupId","target":"group"}],"dependents":[{"entity":"GroupUsers","relation":{"name":"group","from":"groupId","entity":"Groups","to":"id","target":"members","targetComposite":true,"type":"oneToMany","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Groups","hadKeys":false},{"name":"GroupUsers","primaryKey":["id"],"uniqueKey":["groupId","username"],"properties":[{"name":"id","default":"`${groupId}-${username}`","length":64,"nullable":false,"required":true,"type":"string","mapping":"id"},{"name":"username","length":32,"nullable":false,"required":true,"type":"string","mapping":"username"},{"name":"groupId","length":32,"nullable":false,"required":true,"type":"string","mapping":"groupId"},{"name":"role","length":32,"nullable":false,"enum":"Role","required":false,"type":"string","mapping":"role"}],"relations":[{"name":"group","from":"groupId","entity":"Groups","to":"id","target":"members","targetComposite":true,"type":"oneToMany","weak":false},{"name":"user","from":"username","entity":"Users","to":"username","target":"members","type":"oneToMany","weak":false}],"required":[],"indexes":[],"dependents":[],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"GroupUsers","hadKeys":false},{"name":"Devices","primaryKey":["id"],"uniqueKey":["name"],"properties":[{"name":"id","length":32,"nullable":false,"default":"concat(type,\"-\",switch(type){case\"phone\":imei;default:mac;})","required":true,"type":"string","mapping":"id"},{"name":"type","length":16,"nullable":false,"enum":"DeviceType","required":false,"type":"string","mapping":"type"},{"name":"name","length":32,"nullable":false,"required":true,"type":"string","mapping":"name"},{"name":"ownerId","length":32,"nullable":false,"required":false,"type":"string","mapping":"ownerId"},{"name":"so","length":32,"required":false,"type":"string","mapping":"so"},{"name":"imei","length":16,"required":false,"type":"string","mapping":"imei"},{"name":"imei2","length":16,"required":false,"type":"string","mapping":"imei2"},{"name":"mac","length":24,"required":false,"type":"string","mapping":"mac"},{"name":"macBluetooth","length":24,"required":false,"type":"string","mapping":"macBluetooth"},{"name":"ip","length":24,"required":false,"type":"string","mapping":"ip"},{"name":"apiKey","length":255,"required":false,"type":"string","mapping":"apiKey"},{"name":"brand","length":32,"required":false,"type":"string","mapping":"brand"},{"name":"model","length":32,"required":false,"type":"string","mapping":"model"},{"name":"serialNumber","length":32,"required":false,"type":"string","mapping":"serialNumber"},{"name":"created","type":"dateTime","default":"now()","required":false,"mapping":"created"}],"relations":[{"name":"owner","from":"ownerId","entity":"Users","to":"username","target":"devices","type":"oneToMany","weak":false},{"name":"components","type":"manyToOne","composite":false,"from":"id","entity":"Components","weak":true,"to":"deviceId","target":"device"},{"name":"statuses","type":"manyToOne","composite":false,"from":"id","entity":"DeviceStatuses","weak":true,"to":"deviceId","target":"device"},{"name":"files","type":"manyToOne","composite":false,"from":"id","entity":"Files","weak":true,"to":"deviceId","target":"device"}],"required":[],"indexes":[],"dependents":[{"entity":"Components","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","target":"components","targetComposite":true,"type":"oneToMany","weak":false}},{"entity":"DeviceStatuses","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","target":"statuses","type":"oneToMany","weak":false}},{"entity":"Files","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","target":"files","type":"oneToMany","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":true,"mapping":"Devices","hadKeys":false},{"name":"Components","primaryKey":["id"],"uniqueKey":["deviceId","name"],"properties":[{"name":"id","length":50,"nullable":false,"default":"concat(deviceId,\"-\",lower(substring(replace(name,\" \",\"-\"),0,16)))","required":true,"type":"string","mapping":"id"},{"name":"deviceId","length":32,"nullable":false,"required":true,"type":"string","mapping":"deviceId"},{"name":"name","length":16,"nullable":false,"required":true,"type":"string","mapping":"name"},{"name":"type","length":16,"nullable":false,"enum":"ComponentType","required":false,"type":"string","mapping":"type"},{"name":"brand","length":32,"required":false,"type":"string","mapping":"brand"},{"name":"model","length":32,"required":false,"type":"string","mapping":"model"},{"name":"serialNumber","length":32,"required":false,"type":"string","mapping":"serialNumber"},{"name":"created","type":"dateTime","default":"now()","required":false,"mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","target":"components","targetComposite":true,"type":"oneToMany","weak":false},{"name":"files","type":"manyToOne","composite":false,"from":"id","entity":"Files","weak":true,"to":"componentId","target":"component"}],"required":[],"indexes":[],"dependents":[{"entity":"Files","relation":{"name":"component","from":"componentId","entity":"Components","to":"id","target":"files","type":"oneToMany","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Components","hadKeys":false},{"name":"DeviceStatuses","primaryKey":["id"],"indexes":[{"name":"time","fields":["time"]}],"properties":[{"name":"id","type":"integer","nullable":false,"autoincrement":true,"required":true,"mapping":"id"},{"name":"deviceId","length":32,"nullable":false,"required":false,"type":"string","mapping":"deviceId"},{"name":"time","type":"dateTime","required":false,"mapping":"time"},{"name":"created","type":"dateTime","default":"now()","required":false,"mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","target":"statuses","type":"oneToMany","weak":false}],"uniqueKey":[],"required":[],"dependents":[],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"DeviceStatuses","hadKeys":false},{"name":"DevicePositionStatuses","primaryKey":["id"],"properties":[{"name":"id","type":"integer","nullable":false,"required":true,"mapping":"id"},{"name":"latitude","type":"decimal","required":false,"mapping":"latitude"},{"name":"longitude","type":"decimal","required":false,"mapping":"longitude"},{"name":"altitude","type":"decimal","required":false,"mapping":"altitude"}],"relations":[{"name":"status","type":"oneToOne","from":"id","entity":"DevicePerformanceStatuses","to":"id","target":"performance","weak":false}],"uniqueKey":[],"required":[],"indexes":[],"dependents":[],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":false,"hadViewReadExp":false,"mapping":"DevicePositionStatuses","hadKeys":false},{"name":"DevicePerformanceStatuses","primaryKey":["id"],"properties":[{"name":"id","type":"integer","nullable":false,"required":true,"mapping":"id"},{"name":"cpu","type":"decimal","required":false,"mapping":"cpu"},{"name":"gpu","type":"decimal","required":false,"mapping":"gpu"},{"name":"memory","type":"decimal","required":false,"mapping":"memory"},{"name":"wifiSignal","type":"decimal","required":false,"mapping":"wifiSignal"},{"name":"batery","type":"decimal","required":false,"mapping":"batery"},{"name":"temperature","type":"decimal","required":false,"mapping":"temperature"}],"relations":[{"name":"status","type":"oneToOne","from":"id","entity":"DevicePerformanceStatuses","to":"id","target":"position","weak":false},{"name":"performance","type":"oneToOne","composite":false,"from":"id","entity":"DevicePositionStatuses","weak":true,"to":"id","target":"status"},{"name":"position","type":"oneToOne","composite":true,"from":"id","entity":"DevicePerformanceStatuses","weak":true,"to":"id","target":"status"}],"uniqueKey":[],"required":[],"indexes":[],"dependents":[{"entity":"DevicePositionStatuses","relation":{"name":"status","type":"oneToOne","from":"id","entity":"DevicePerformanceStatuses","to":"id","target":"performance","weak":false}},{"entity":"DevicePerformanceStatuses","relation":{"name":"status","type":"oneToOne","from":"id","entity":"DevicePerformanceStatuses","to":"id","target":"position","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":false,"hadViewReadExp":false,"mapping":"DevicePerformanceStatuses","hadKeys":false},{"name":"Files","primaryKey":["id"],"properties":[{"name":"id","length":255,"nullable":false,"required":true,"type":"string","mapping":"id"},{"name":"type","length":16,"nullable":false,"enum":"FileType","required":false,"type":"string","mapping":"type"},{"name":"deviceId","length":32,"nullable":false,"required":false,"type":"string","mapping":"deviceId"},{"name":"componentId","length":50,"required":false,"type":"string","mapping":"componentId"},{"name":"startDate","type":"dateTime","nullable":false,"required":false,"mapping":"startDate"},{"name":"endDate","type":"dateTime","nullable":false,"required":false,"mapping":"endDate"},{"name":"created","type":"dateTime","default":"now()","required":false,"mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","target":"files","type":"oneToMany","weak":false},{"name":"component","from":"componentId","entity":"Components","to":"id","target":"files","type":"oneToMany","weak":false}],"constraints":[{"message":"endDate cannot be less than startDate","condition":"startDate<=endDate"}],"uniqueKey":[],"required":[],"indexes":[],"dependents":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Files","hadKeys":false}]},{"name":"Keycloak","entities":[]}]}